<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Arcanum Aeterna - Anti-Gravity Edition</title>
    <meta name="description" content="The Master Mystic Tarot Experience">
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Noto+Serif+Thai:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Matter.js Physics Engine -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
</head>

<body>

    <!-- Welcome Intro Modal -->
    <div id="welcome-modal" class="welcome-overlay visible">
        <div class="welcome-card">
            <div class="welcome-header">
                <div class="welcome-icon">âœ¦</div>
                <p class="welcome-pre">â€” Welcome to â€”</p>
                <h2 id="welcome-title" class="welcome-title">Arcanum Aeterna</h2>
                <p id="welcome-sub" class="welcome-sub">The Master Mystic Tarot</p>
            </div>
            <div class="welcome-body">
                <ul id="welcome-steps" class="welcome-steps">
                    <li><span class="step-icon">ğŸ”€</span><span id="ws1"><b>Shuffle Deck</b> â€” Realign the cosmic
                            energy</span></li>
                    <li><span class="step-icon">ğŸƒ</span><span id="ws2"><b>Draw Card</b> â€” Reveal up to 5 cards from the
                            deck</span></li>
                    <li><span class="step-icon">ğŸ‘†</span><span id="ws3"><b>Tap a Card</b> â€” Expand to see full image &
                            meaning</span></li>
                    <li><span class="step-icon">ğŸ“œ</span><span id="ws4"><b>History</b> â€” Review all cards from your
                            session</span></li>
                    <li><span class="step-icon">ğŸ¤–</span><span id="ws5"><b>Ask AI</b> â€” Copy your reading as a prompt
                            for AI</span></li>
                </ul>
            </div>
            <button id="welcome-dismiss" class="welcome-btn">Begin Your Reading âœ¦</button>
        </div>
    </div>

    <!-- Parallax Background Layer -->
    <div id="parallax-bg" class="parallax-layer"></div>
    <div id="stars-fg" class="parallax-layer"></div>

    <!-- Ambient Vignette Glow -->
    <div id="vignette-glow" aria-hidden="true"></div>

    <!-- Background Audio -->
    <audio id="bg-music" src="Sound.mp3" loop></audio>

    <!-- Physics Canvas Container -->
    <div id="physics-container"></div>

    <!-- Top Controls (Glassmorphism) -->
    <div class="top-controls glass-panel">
        <div class="lang-switch">
            <button id="lang-en" class="lang-btn active" data-lang="en">EN</button>
            <span class="divider">|</span>
            <button id="lang-th" class="lang-btn" data-lang="th">TH</button>
        </div>
        <div class="audio-switch">
            <button id="btn-sound" class="icon-btn" aria-label="Toggle Sound">ğŸ”‡</button>
        </div>
    </div>

    <header class="glass-header">
        <h1 id="app-title" class="glowing-text">Arcanum Aeterna</h1>
        <div id="app-subtitle" class="subtitle">The Master Mystic Tarot</div>
    </header>

    <!-- Floating Action Bar -->
    <div class="control-panel glass-panel-floating">
        <button id="btn-shuffle" class="action-btn">Shuffle Deck</button>
        <button id="btn-draw" class="action-btn">Draw Card</button>
        <button id="btn-reset" class="action-btn">Reset Table</button>
        <button id="btn-history" class="action-btn">History ğŸ“œ</button>
    </div>
    <!-- Card count badge -->
    <div id="card-count-badge" class="card-count-badge" aria-live="polite"></div>

    <!-- Status Toast -->
    <div id="status-display" aria-live="polite"></div>

    <!-- Overlay UI for Reading (Grid Mode) functionality is handled via Physics logic now, but we keep a container for reading overlay if needed -->
    <div id="reading-overlay" class="reading-layer">
        <!-- Reading slots populated by JS when cards snap -->
    </div>

    <!-- Card Detail Overlay (click to expand) -->
    <div id="card-detail-overlay" class="card-detail-overlay" aria-label="Card Detail">
        <div class="card-detail-inner">
            <button class="card-detail-close" aria-label="Close">&times;</button>
            <div class="card-detail-image">
                <img id="detail-img" src="" alt="Tarot Card">
            </div>
            <div class="card-detail-info">
                <h2 id="detail-title" class="card-detail-title"></h2>
                <div id="detail-orient" class="card-detail-orient"></div>
                <div id="detail-meaning" class="card-detail-meaning"></div>
                <div id="detail-type" class="card-detail-type"></div>
            </div>
        </div>
    </div>

    <!-- History Modal (Glassmorphism) -->
    <div id="history-modal" class="modal">
        <div class="modal-backdrop" id="history-backdrop"></div>
        <div class="modal-content glass-modal">
            <div class="history-header">
                <h2 id="history-title" class="history-title">Session History</h2>
                <button id="close-history" class="close-btn" aria-label="Close History">Ã—</button>
            </div>
            <ul id="history-list">
                <!-- Items injected via JS -->
            </ul>

            <!-- AI Oracle Section -->
            <div class="ai-control-section">
                <div id="ai-title" class="ai-title">ğŸ”® Ask the AI Oracle</div>
                <div class="input-group">
                    <label for="ai-topic" id="lbl-topic" class="input-label">Topic:</label>
                    <select id="ai-topic" class="mystic-input">
                        <option value="General Overview">General Overview</option>
                        <option value="Love &amp; Relationships">Love</option>
                        <option value="Work &amp; Career">Work</option>
                        <option value="Finance">Finance</option>
                        <option value="Health">Health</option>
                        <option value="Spiritual Growth">Spiritual</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="ai-situation" id="lbl-situation" class="input-label">Situation:</label>
                    <textarea id="ai-situation" class="mystic-input"
                        placeholder="Describe your current situation..."></textarea>
                </div>
                <button id="btn-ai-read" class="action-btn ai-copy-btn rune-btn">ğŸ”® Read My Cards</button>
                <div id="ai-loading" class="ai-loading" style="display:none;">
                    <div class="ai-spinner"></div>
                    <span>The oracle is reading...</span>
                </div>
                <div id="ai-response" class="ai-response" style="display:none;"></div>
                <button id="btn-copy-ai" class="action-btn ai-copy-btn rune-btn" style="margin-top:8px;"> Copy
                    Prompt</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>